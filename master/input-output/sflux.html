
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-8.3.4">
    
    
      
        <title>Atmospheric flux (/sflux) - SCHISM</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4a0965b7.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#interpolation-and-prioritization" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="SCHISM" class="md-header__button md-logo" aria-label="SCHISM" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SCHISM
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Atmospheric flux (/sflux)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/schism-dev/schism" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="SCHISM" class="md-nav__button md-logo" aria-label="SCHISM" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    SCHISM
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/schism-dev/schism" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../changelog.html" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Getting started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/getting-sourcecode.html" class="md-nav__link">
        Getting the source code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/compilation.html" class="md-nav__link">
        Compilation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/test_suite.html" class="md-nav__link">
        Test suite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/typical-workflow.html" class="md-nav__link">
        Typical workflow (a cheat sheet)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/grid-generation.html" class="md-nav__link">
        Mesh generation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing.html" class="md-nav__link">
        Preprocessing
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_8" type="checkbox" id="__nav_3_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_8">
          Preprocessing with pylib
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Preprocessing with pylib" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Preprocessing with pylib
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing-with-pylib/overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing-with-pylib/installation.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing-with-pylib/schismcheck.html" class="md-nav__link">
        schismCheck (input visualization)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_9" type="checkbox" id="__nav_3_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_9">
          Preprocessing with PySCHISM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Preprocessing with PySCHISM" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_9">
          <span class="md-nav__icon md-icon"></span>
          Preprocessing with PySCHISM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing-with-pyschism/overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing-with-pyschism/installation.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing-with-pyschism/bctides.html" class="md-nav__link">
        Tides
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing-with-pyschism/boundary.html" class="md-nav__link">
        B.C. from HYCOM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing-with-pyschism/atmos.html" class="md-nav__link">
        Atmospheric forcing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/pre-processing-with-pyschism/nwm.html" class="md-nav__link">
        Souce and Sink
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/running-model.html" class="md-nav__link">
        Running the model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/visualization.html" class="md-nav__link">
        Visualization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/post-processing.html" class="md-nav__link">
        Postprocessing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Model formulation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Model formulation" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Model formulation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/physical-formulation.html" class="md-nav__link">
        Physical formulation
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Numerical formulation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Numerical formulation" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Numerical formulation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/geometry-discretization.html" class="md-nav__link">
        Geometry and discretization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/barotropic-solver.html" class="md-nav__link">
        Barotropic solver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/eulerian-lagrangian-method.html" class="md-nav__link">
        Eulerian-Lagrangian Method
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/momentum-equation.html" class="md-nav__link">
        Momentum equation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/vertical-velocity.html" class="md-nav__link">
        Vertical velocity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/turbulence-closure.html" class="md-nav__link">
        Turbulence closure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/transport-equation.html" class="md-nav__link">
        Transport equation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/updating-levels.html" class="md-nav__link">
        Updating the levels/Inundation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../schism/spherical-coordinates.html" class="md-nav__link">
        Spherical coordinates
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Input/Output
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Input/Output" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Input/Output
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="hgrid.html" class="md-nav__link">
        Horizontal grid (hgrid.gr3)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="vgrid.html" class="md-nav__link">
        Vertical grid (vgrid.in)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="param.html" class="md-nav__link">
        Model parameters (param.nml)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="bctides.html" class="md-nav__link">
        Boundary conditions (bctides.in)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="friction.html" class="md-nav__link">
        Bottom friction
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Atmospheric flux (/sflux)
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="sflux.html" class="md-nav__link md-nav__link--active">
        Atmospheric flux (/sflux)
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#interpolation-and-prioritization" class="md-nav__link">
    Interpolation and prioritization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-narr-files-for-your-simulation-north-america-only" class="md-nav__link">
    Using NARR files for your simulation (North America only)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#global-sflux-ncep-cfsr" class="md-nav__link">
    Global sflux - NCEP CFSR
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-your-own-sflux-inputs" class="md-nav__link">
    Preparing your own sflux inputs
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="optional-inputs.html" class="md-nav__link">
        Optional inputs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="outputs.html" class="md-nav__link">
        Outputs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Mesh generation - advanced topics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Mesh generation - advanced topics" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Mesh generation - advanced topics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mesh-generation/overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mesh-generation/cross_regime.html" class="md-nav__link">
        Meshing for cross-scale regimes
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_3" type="checkbox" id="__nav_6_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_3">
          Meshing for compound floods
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Meshing for compound floods" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          Meshing for compound floods
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mesh-generation/meshing-for-compound-floods/overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mesh-generation/meshing-for-compound-floods/extract-thalweg.html" class="md-nav__link">
        Extract thalwegs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mesh-generation/meshing-for-compound-floods/generate-river-map.html" class="md-nav__link">
        Generate river map
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mesh-generation/meshing-for-compound-floods/meshing-in-SMS.html" class="md-nav__link">
        Meshing in SMS
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modules" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/overview.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/generic-tracer.html" class="md-nav__link">
        Generic tracer module
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/age.html" class="md-nav__link">
        AGE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/sed2d.html" class="md-nav__link">
        2D Sediment model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/sed3d.html" class="md-nav__link">
        3D Sediment model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/icm.html" class="md-nav__link">
        ICM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/cosine.html" class="md-nav__link">
        CoSiNe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/dvd.html" class="md-nav__link">
        DVD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/marsh-migration.html" class="md-nav__link">
        Marsh migration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/analysis-mode.html" class="md-nav__link">
        Analysis mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/hydraulics.html" class="md-nav__link">
        Hydraulics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/particle-tracking.html" class="md-nav__link">
        Particle tracking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/wwm.html" class="md-nav__link">
        WWM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/fabm.html" class="md-nav__link">
        FABM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/pahm.html" class="md-nav__link">
        PaHM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../modules/single-class-ice.html" class="md-nav__link">
        Single-class ice module
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../code-contribution.html" class="md-nav__link">
        Code structure
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../case-study.html" class="md-nav__link">
        Case studies
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          SCHISM external coupling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SCHISM external coupling" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          SCHISM external coupling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coupling/esmf.html" class="md-nav__link">
        Earth System Modeling Framework
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coupling/nuopc.html" class="md-nav__link">
        National Unified Operational Prediction Capability
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coupling/coastalapp.html" class="md-nav__link">
        NOAA's CoastalApp
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coupling/mossco.html" class="md-nav__link">
        Modular System for Shelves and Coasts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coupling/cesm.html" class="md-nav__link">
        NCAR's Community Earth System Model
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq.html" class="md-nav__link">
        Frequently Asked Questions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../known_issues.html" class="md-nav__link">
        Known issues
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../contribute-to-this-online-manual.html" class="md-nav__link">
        Contribute to this online manual
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/schism-dev/schism/edit/master/docs/input-output/sflux.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



  <h1>Atmospheric flux (/sflux)</h1>

<p>The <code>sflux/</code> dir is required if <code>nws=2</code>. In this case, atmoserpic forcings include wind, air pressure and temperature, precipitation, humidity and longwave and shortwave fluxes. These are specified in the netcdf files inside <code>sflux/</code> dir, and conform to the NetCDF Climate and Forecast (CF) Metadata Convention 1.0.</p>
<p>There are 4 types of files in sflux/dir; see <a href="http://ccrm.vims.edu/yinglong/wiki_files/NARR/">this site</a> for sample files.</p>
<ol>
<li>sflux_inputs.txt: This asci file is a namelist</li>
<li>sflux_air_1.[XXXX].nc: netcdf files that have time (in days), wind speed at 10m above MSL (u,v), air temperature and pressure and specific humidity;</li>
<li>sflux_prc_1.[XXXX].nc: netcdf files that time (in days), have precipitation data;</li>
<li>sflux_rad_1.[XXXX].nc: netcdf files that have time (in days), downward long and short (solar) wave radiation fluxes.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">sflux_input.txt</p>
<p>sflux_input.txt has the following basic structure - </p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>&amp;sflux_inputs ! file name
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>/
</code></pre></div>
All parameters inside this input are optional. Advanced users may consult the source code for a complete list of parameters. Additionally, see <a href="https://raw.githubusercontent.com/schism-dev/schism/master/sample_inputs/sflux_inputs.txt">sample_input</a> for a detailed example file.</p>
</div>
<div class="admonition note">
<p class="admonition-title">sflux_air</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>netcdf sflux_air_1.001 {
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>dimensions:
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        nx_grid = 349 ;
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>        ny_grid = 277 ;
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>        time = UNLIMITED ; // (8 currently)
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>variables:
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        float time(time) ;
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>                time:long_name = &quot;Time&quot; ;
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>                time:standard_name = &quot;time&quot; ;
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>                time:units = &quot;days since 2001-01-01&quot; ;
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>                time:base_date = 2001, 1, 1, 0 ;
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>        float lon(ny_grid, nx_grid) ;
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>                lon:long_name = &quot;Longitude&quot; ;
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>                lon:standard_name = &quot;longitude&quot; ;
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>                lon:units = &quot;degrees_east&quot; ;
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>        float lat(ny_grid, nx_grid) ;
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>                lat:long_name = &quot;Latitude&quot; ;
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>                lat:standard_name = &quot;latitude&quot; ;
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>                lat:units = &quot;degrees_north&quot; ;
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>        float uwind(time, ny_grid, nx_grid) ;
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>                uwind:long_name = &quot;Surface Eastward Air Velocity (10m AGL)&quot; ;
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>                uwind:standard_name = &quot;eastward_wind&quot; ;
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>                uwind:units = &quot;m/s&quot; ;
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>        float vwind(time, ny_grid, nx_grid) ;
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>                vwind:long_name = &quot;Surface Northward Air Velocity (10m AGL)&quot; ;
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>                vwind:standard_name = &quot;northward_wind&quot; ;
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>                vwind:units = &quot;m/s&quot; ;
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>        float prmsl(time, ny_grid, nx_grid) ;
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>                prmsl:long_name = &quot;Pressure reduced to MSL&quot; ;
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>                prmsl:standard_name = &quot;air_pressure_at_sea_level&quot; ;
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>                prmsl:units = &quot;Pa&quot; ;
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>        float stmp(time, ny_grid, nx_grid) ;
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>                stmp:long_name = &quot;Surface Air Temperature (2m AGL)&quot; ;
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>                stmp:standard_name = &quot;air_temperature&quot; ;
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>                stmp:units = &quot;K&quot; ;
<a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a>        float spfh(time, ny_grid, nx_grid) ;
<a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a>                spfh:long_name = &quot;Surface Specific Humidity (2m AGL)&quot; ;
<a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>                spfh:standard_name = &quot;specific_humidity&quot; ;
<a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a>                spfh:units = &quot;1&quot; ;
<a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a>
<a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a>// global attributes:
<a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a>                :Conventions = &quot;CF-1.0&quot; ;
<a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a>}
</code></pre></div>
</div>
<div class="admonition notes">
<p class="admonition-title">sflux_prc</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>netcdf sflux_prc_1.001 {
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>dimensions:
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>        nx_grid = 349 ;
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>        ny_grid = 277 ;
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>        time = UNLIMITED ; // (8 currently)
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>variables:
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>        float time(time) ;
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>                time:long_name = &quot;Time&quot; ;
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>                time:standard_name = &quot;time&quot; ;
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>                time:units = &quot;days since 2001-01-01&quot; ;
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>                time:base_date = 2001, 1, 1, 0 ;
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>        float lon(ny_grid, nx_grid) ;
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>                lon:long_name = &quot;Longitude&quot; ;
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>                lon:standard_name = &quot;longitude&quot; ;
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>                lon:units = &quot;degrees_east&quot; ;
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>        float lat(ny_grid, nx_grid) ;
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>                lat:long_name = &quot;Latitude&quot; ;
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>                lat:standard_name = &quot;latitude&quot; ;
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>                lat:units = &quot;degrees_north&quot; ;
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>        float prate(time, ny_grid, nx_grid) ;
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a>                prate:long_name = &quot;Surface Precipitation Rate&quot; ;
<a id="__codelineno-2-22" name="__codelineno-2-22" href="#__codelineno-2-22"></a>                prate:standard_name = &quot;precipitation_flux&quot; ;
<a id="__codelineno-2-23" name="__codelineno-2-23" href="#__codelineno-2-23"></a>                prate:units = &quot;kg/m^2/s&quot; ;
<a id="__codelineno-2-24" name="__codelineno-2-24" href="#__codelineno-2-24"></a>
<a id="__codelineno-2-25" name="__codelineno-2-25" href="#__codelineno-2-25"></a>// global attributes:
<a id="__codelineno-2-26" name="__codelineno-2-26" href="#__codelineno-2-26"></a>                :Conventions = &quot;CF-1.0&quot; ;
<a id="__codelineno-2-27" name="__codelineno-2-27" href="#__codelineno-2-27"></a>}
</code></pre></div>
</div>
<div class="admonition notes">
<p class="admonition-title">sflux_rad</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>netcdf sflux_rad_1.001 {
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>dimensions:
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>        nx_grid = 349 ;
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>        ny_grid = 277 ;
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>        time = UNLIMITED ; // (8 currently)
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>variables:
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>        float time(time) ;
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>                time:long_name = &quot;Time&quot; ;
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>                time:standard_name = &quot;time&quot; ;
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>                time:units = &quot;days since 2001-01-01&quot; ;
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>                time:base_date = 2001, 1, 1, 0 ;
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>        float lon(ny_grid, nx_grid) ;
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>                lon:long_name = &quot;Longitude&quot; ;
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>                lon:standard_name = &quot;longitude&quot; ;
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>                lon:units = &quot;degrees_east&quot; ;
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>        float lat(ny_grid, nx_grid) ;
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>                lat:long_name = &quot;Latitude&quot; ;
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>                lat:standard_name = &quot;latitude&quot; ;
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a>                lat:units = &quot;degrees_north&quot; ;
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a>        float dlwrf(time, ny_grid, nx_grid) ;
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a>                dlwrf:long_name = &quot;Downward Long Wave Radiation Flux&quot; ;
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a>                dlwrf:standard_name = &quot;surface_downwelling_longwave_flux_in_air&quot; ;
<a id="__codelineno-3-23" name="__codelineno-3-23" href="#__codelineno-3-23"></a>                dlwrf:units = &quot;W/m^2&quot; ;
<a id="__codelineno-3-24" name="__codelineno-3-24" href="#__codelineno-3-24"></a>        float dswrf(time, ny_grid, nx_grid) ;
<a id="__codelineno-3-25" name="__codelineno-3-25" href="#__codelineno-3-25"></a>                dswrf:long_name = &quot;Downward Short Wave Radiation Flux&quot; ;
<a id="__codelineno-3-26" name="__codelineno-3-26" href="#__codelineno-3-26"></a>                dswrf:standard_name = &quot;surface_downwelling_shortwave_flux_in_air&quot; ;
<a id="__codelineno-3-27" name="__codelineno-3-27" href="#__codelineno-3-27"></a>                dswrf:units = &quot;W/m^2&quot; ;
<a id="__codelineno-3-28" name="__codelineno-3-28" href="#__codelineno-3-28"></a>
<a id="__codelineno-3-29" name="__codelineno-3-29" href="#__codelineno-3-29"></a>// global attributes:
<a id="__codelineno-3-30" name="__codelineno-3-30" href="#__codelineno-3-30"></a>                :Conventions = &quot;CF-1.0&quot; ;
<a id="__codelineno-3-31" name="__codelineno-3-31" href="#__codelineno-3-31"></a>}
</code></pre></div>
</div>
<p>Note that <code>sflux_rad</code> is only required if the heat exchange module is invoked via <code>ihconsv=1</code>, and <code>sflux_prc</code> is only required if the salt exchange module is invoked via <code>isconsv=1</code>.
Since a barotropic model cannot do heat/salt exchange properly, these two types of sflux inputs should not be used there. To impose rainfall in a  barotropic model,
 you have to use the source/sink option <code>if_source</code> by converting rainfall rate into sources.</p>
<p>We have NARR sflux files from 1979-present, but cannot upload all of them to the web due to disk space limitation. You can find some samples at <a href="http://ccrm.vims.edu/yinglong/wiki_files/NARR/">http://ccrm.vims.edu/yinglong/wiki_files/NARR/</a>.</p>
<p>Two sources of data are allowed for each type of <code>.nc</code> files, and the relative priority is fixed by the file name. For instance <code>sflux_air_1.0003.nc</code> might be blended with a file called <code>sflux_air_2.0003.nc</code>. The ".0003" component of the name represents the order of the file within the stack of provided input files. For instance, there might be a new file (<code>0001</code>, <code>0002</code>, <code>0003</code>) produced every 12 hours in a forecast cycle.</p>
<h2 id="interpolation-and-prioritization">Interpolation and prioritization<a class="headerlink" href="#interpolation-and-prioritization" title="Permanent link">&para;</a></h2>
<p>Using air as an example, it is assumed that the file <code>sflux_air_2.0001.nc</code> is more resolved or accurate than sflux_air_1.0001.nc. The two will be blended in the model in a way that favors the ‘_2’ file. This blending of the fields is only adjustable in the code as described in notes below. The default in sflux_9c.F90 is a 99:1 blend of the ‘_2’ file to the ‘_1’ file.</p>
<p>As was remarked above, the files are arranged temporally in a stack of files starting with ".0001". Given the sequence of forecasting and analysis, it is common for atmospheric files to overlap. A file might begin with a brief period of data assimilation plus a few days of forecast. SCHISM assumes that a new file indicates the injection of information, so when it encounters overlap, it advances to the later file.</p>
<h2 id="using-narr-files-for-your-simulation-north-america-only">Using NARR files for your simulation (North America only)<a class="headerlink" href="#using-narr-files-for-your-simulation-north-america-only" title="Permanent link">&para;</a></h2>
<p>First, make sure the NARR grid covers your <code>hgrid.ll</code> to ensure proper sptatial interpolation.</p>
<p>In your run directory, <code>mkdir sflux</code> and inside it, create symbolic links to the NARR files. e.g., if you run starts from June 10, 2004 and ends June 20, 2004, then</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sflux_air_1.0001.nc --&gt; narr_air.2004_06_10.nc
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>sflux_air_1.0002.nc --&gt; narr_air.2004_06_11.nc
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>...
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>sflux_air_1.0011.nc --&gt; narr_air.2004_06_20.nc
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>sflux_air_1.0012.nc --&gt; narr_air.2004_06_21.nc # (extra day to account for time zone difference)
</code></pre></div>
<p>Similarly for <code>sflux_rad_*.nc</code> and <code>sflux_prc_*.nc</code>. As described above, the number "1" after "air_" denotes the first data set used, with the second set taking priority; you can use up to 2 sets in SCHISM (which combines them with some given weights set in sflux_subs.F90); we only use 1 set in this example.</p>
<h2 id="global-sflux-ncep-cfsr">Global sflux - NCEP CFSR<a class="headerlink" href="#global-sflux-ncep-cfsr" title="Permanent link">&para;</a></h2>
<p>This <a href="http://rda.ucar.edu/">web site</a> has many global atmospheric model files, and a very useful source is the NCEP's CFSR. Note that you need to register yourself at the site first.</p>
<p>Simply select 'NCEP Climate Forecast System Reanalysis (CFSR)', and then CFSRv2. Under 'Data Access' you can get a sub-set (instead of global files). Then select all variable required by SCHISM:</p>
<ul>
<li>Wind u,v at 10m</li>
<li>(Air) pressure reduced to MSL</li>
<li>(Air) temperature at 2m AGL</li>
<li>Specific humidity at 2m AGL</li>
<li>Downward longwave radiation flux at ground level</li>
<li>Downward shortwave radiation flux at ground level</li>
<li>Precipitation rate at ground level</li>
</ul>
<p>In the new window, select output format as netcdf, and remember to restrict the vertical heights for each variable. Note that pressure is given at a different grid than other variables and so you'd do it separately. You can select a region and computational grid and temporal resolution etc and then submit the request.</p>
<p>Once you have downloaded the (compressed) netcdf files, you can use these <a href="http://ccrm.vims.edu/yinglong/wiki_files/process_CFSR.tgz">3 matlab scripts</a> to process them into <code>sflux_[air,rad,prc]*.nc</code>. Note that the files are bundled differently for difference period (e.g. before and after Oct. 1, 2011) and so you may need to modify those scripts slightly.</p>
<h2 id="preparing-your-own-sflux-inputs">Preparing your own sflux inputs<a class="headerlink" href="#preparing-your-own-sflux-inputs" title="Permanent link">&para;</a></h2>
<p>After familiarize yourself with the NARR files and their format, you may embark on creating your own nc files. The best way is to modify existing matlab scripts (<code>src/Utility/Sflux_nc/readnc*.m</code>) included in the source code bundle, which have extensively in-line comments to guide you along the way.</p>
<p>Since the time and space interpolation will be used to interpolate sflux info onto hgrid.ll at runtime, you need to make sure that the lon/lat grid in <code>sflux_*_1.*</code> covers <code>hgrid.ll</code>, and the union of time records in <code>sflux*.nc</code> covers the entire simulation period. The time zone info is given by <code>utc_start</code>, and you may pre-pend some records if this value is negative (eastern hemisphere) or append if it is positive. Even if <code>utc_start=0</code>, the code will need at least one time record beyond <code>rnday</code> for interpolation; simply duplicate the record at <code>rnday</code> if you do not have such info.</p>
<div class="admonition notes">
<p class="admonition-title">Wind convention</p>
<p>u-component is eastward, v-comp. is northward (normal math convention, not compass convention)</p>
</div>
<div class="admonition notes">
<p class="admonition-title">Additional files</p>
<ul>
<li><code>windrot_geo2proj.gr3</code>: rotates winds in case they do not align with coordinate axes, i.e. lat/lon
<!--- - <code>watertype.gr3</code>: 6 is clear water, 7 is muddiest. Search in <code>schism_init.F90</code> for different water types. Required only if ihconsv=1.--></li>
</ul>
</div>
<div class="admonition notes">
<p class="admonition-title">Some details from sflux_9c.F90</p>
<ul>
<li>Of all attributes in nc file, only 'base_date' is required. This is the time origin used in each file and the ‘time’ is then the offset (in days) from this origin. Note that the last number (hour) is NOT used and UTC is always assumed in each file. Use <code>utc_start</code> in <code>param.nml</code> to adjust time zone;</li>
<li>The grids for air, rad and prc can be different (but must be the same within each type and each source). Additional requirements for the structured grid in .nc: <a href="nx,ny">lon,lat</a> give x,y coord., nx is # of pts in x. Suppose a node in the grid is given by (i,j) (1&lt;=i&lt;=nx), then <strong>the quad (i,j), (i+1,j), (i+1,j+1,i,j+1) can be in either counter-clockwise or clockwise direction (but must be self consistent within each set - no mix-and-match)</strong>;</li>
<li>Search for "relative_weight" (inside <code>netcdf_io</code>) to change relative weights of the 2 sources for air, rad and prc if needed. All weights must &gt; 0!</li>
<li>in case of 2 sources/grids for a variable, use "1" as larger grid (i.e. encompassing hgrid.ll) and "2" as smaller grid. The code will calculate weights associated with the 2 grids, and if some nodes in hgrid.ll fall outside grid "2" the interpolation will be done on grid "1" only (see combine_sflux_data, in particular, bad_node_ based on area coordinates outside [0,1]). Both grids must start from stack 1 but may have different # of stacks for each variable. Within each nc file # of time steps can vary. The cumulative time window of '2' does not need to cover the entire simulation (code will use values from '1' only if '2' time is missing), but window of '1' must;</li>
<li><code>air_1_max_window_hours</code> (etc) are set in netcdf_io to define the max time stamp (offset from time origin) within each nc file. Besides those in netcdf_io, max_file_times (max. #of time records in each nc file) in routine get_times_etc() may need to be adjusted as well.</li>
</ul>
</div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="friction.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Bottom friction" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Bottom friction
            </div>
          </div>
        </a>
      
      
        
        <a href="optional-inputs.html" class="md-footer__link md-footer__link--next" aria-label="Next: Optional inputs" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Optional inputs
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.integrate", "toc.follow", "content.code.annotate"], "search": "../assets/javascripts/workers/search.85cb4492.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f758a944.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>